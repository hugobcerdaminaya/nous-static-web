<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Schema.yml & JsonForm</title>
  <link rel="stylesheet" type="text/css" href="deps/opt/bootstrap.css" />
</head>
<body class="container">
  <h1>Formulario generado con schema.yml
  </h1>
  <form></form>
  <div id="res" class="alert"></div>
  <script type="text/javascript" src="deps/jquery.min.js"></script>
  <script type="text/javascript" src="deps/underscore.js"></script>
  <script type="text/javascript" src="deps/opt/jsv.js"></script>
  <script type="text/javascript" src="lib/jsonform.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.js"></script>
  <script type="text/javascript">
     
    window.addEventListener('load', (event) => {
     readTextFile("ejemplo_blog.schema.yml")
    });

    function readTextFile(file)
      {
          var rawFile = new XMLHttpRequest();
          rawFile.open("GET", file, false);
          rawFile.onreadystatechange = function ()
          {
              if(rawFile.readyState === 4)
              {
                  if(rawFile.status === 200 || rawFile.status == 0)
                  {
                      var allText = rawFile.responseText;
                      var doc = jsyaml.load(allText); 
                      $('form').jsonForm({
                        schema: {
                          doc
                        },
                        onSubmit: function (errors, values) {
                          if (errors) {
                            $('#res').html('<p>Ocurrió un error, el formulario no puede ser enviado</p>');
                          } else {
                            $('#res').html('<p>El artículo ' + values.doc.articulo.titulo + ' con fecha <br/>' +
                              values.doc.articulo.fecha + ', ha sido creado. </p>');
                              console.log(values);
                          }
                        }
                      });
                  }
              }
          }
          rawFile.send(null);
      }
</script>

  
</body>
</html>